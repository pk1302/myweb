
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Posibble Studio Booking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client"
  }
}
</script>
</head>
  <body class="bg-zinc-900 text-white">
    <div id="root"></div>
    <script type="module">
import React, { useState, useEffect, useCallback, useMemo } from 'react';
import ReactDOM from 'react-dom/client';

// --- START OF types.ts (as JS objects/enums) ---
const View = {
  USER: 'USER',
  ADMIN: 'ADMIN'
};

// --- START OF constants.ts ---
const PRICING_PLANS = [
  {
    id: 'basic',
    name: 'Basic Studio',
    price: 2000,
    description: 'Just the space. Bring your own gear and create freely.',
    features: ['Studio Space Access'],
  },
  {
    id: 'standard',
    name: 'Standard Package',
    price: 3500,
    description: 'A complete setup for most projects, cameraman included.',
    features: [
      'Studio Space Access',
      '2 Professional Cameras',
      'Standard Lighting Kit',
      '2 Shure Microphones',
      'Dedicated Cameraman',
    ],
  },
  {
    id: 'premium',
    name: 'Premium Package',
    price: 4500,
    description: 'For complex shoots requiring multiple angles and full support.',
    features: [
      'Studio Space Access',
      '3 Professional Cameras',
      'Advanced Lighting Kit',
      '2 Shure Microphones',
      'Dedicated Cameraman',
    ],
  },
];

const HOURLY_SLOTS = Array.from({ length: 14 }, (_, i) => {
    const hour = i + 9;
    return `${hour < 10 ? '0' : ''}${hour}:00`;
});

// --- START OF components/Header.tsx ---
const Header = ({ currentView, toggleView, isAuthenticated, logout }) => {
  return (
    React.createElement("header", { className: "bg-zinc-900/80 backdrop-blur-sm sticky top-0 z-40" },
      React.createElement("div", { className: "container mx-auto px-4 sm:px-6 lg:px-8" },
        React.createElement("div", { className: "flex items-center justify-between h-16" },
          React.createElement("div", { className: "flex items-center" },
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-8 w-8 text-yellow-400", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
              React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7H4a2 2 0 00-2 2v6a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2z" })
            ),
            React.createElement("span", { className: "ml-3 text-2xl font-bold text-white" }, "Posibble Studio")
          ),
          React.createElement("div", { className: "flex items-center space-x-4" },
            React.createElement("button", {
              onClick: toggleView,
              className: "px-4 py-2 text-sm font-medium text-white bg-zinc-700 rounded-md hover:bg-yellow-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 transition-colors"
            },
              currentView === View.USER ? 'Admin Panel' : 'User View'
            ),
            isAuthenticated && (
              React.createElement("button", {
                onClick: logout,
                className: "px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 transition-colors"
              },
                "Logout"
              )
            )
          )
        )
      )
    )
  );
};

// --- START OF components/Pricing.tsx ---
const CheckIcon = () => (
  React.createElement("svg", { className: "h-6 w-6 text-yellow-400", xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
    React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M5 13l4 4L19 7" })
  )
);

const PhoneIcon = () => (
    React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-6 w-6 text-yellow-400", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
        React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" })
    )
);

const PricingCard = ({ plan, onSelect }) => (
  React.createElement("div", { className: `flex flex-col h-full bg-zinc-800 rounded-2xl shadow-xl border border-zinc-700 p-8 transform transition-transform duration-300 hover:-translate-y-2 ${plan.id === 'standard' ? 'border-yellow-500 ring-2 ring-yellow-500' : ''}` },
    React.createElement("h3", { className: "text-2xl font-bold text-white" }, plan.name),
    React.createElement("p", { className: "mt-4 text-gray-400 flex-grow" }, plan.description),
    React.createElement("div", { className: "mt-6" },
      React.createElement("span", { className: "text-5xl font-extrabold text-white" }, `₹${plan.price.toLocaleString('en-IN')}`),
      React.createElement("span", { className: "text-lg font-medium text-gray-400" }, "/hour")
    ),
    React.createElement("ul", { className: "mt-8 space-y-4" },
      plan.features.map((feature, index) => (
        React.createElement("li", { key: index, className: "flex items-start" },
          React.createElement("div", { className: "flex-shrink-0" },
            React.createElement(CheckIcon, null)
          ),
          React.createElement("p", { className: "ml-3 text-base text-gray-300" }, feature)
        )
      ))
    ),
    React.createElement("div", { className: "mt-auto pt-8" },
      React.createElement("button", {
        onClick: onSelect,
        className: "w-full bg-yellow-500 text-slate-900 font-bold py-3 px-6 rounded-lg hover:bg-yellow-600 transition-colors"
      },
        "Select Plan"
      )
    )
  )
);

const Pricing = ({ onSelectPlan }) => {
  return (
    React.createElement("section", { id: "pricing-section", className: "py-20 sm:py-28 bg-zinc-900" },
      React.createElement("div", { className: "container mx-auto px-4 sm:px-6 lg:px-8" },
        React.createElement("div", { className: "text-center mb-16" },
          React.createElement("h2", { className: "text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight text-white" },
            "Flexible Pricing for Every Creator"
          ),
          React.createElement("p", { className: "mt-4 max-w-3xl mx-auto text-lg text-gray-400" },
            "Choose a standard package or call us to build a custom one. All prices are inclusive of taxes."
          )
        ),
        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 items-stretch" },
          PRICING_PLANS.map((plan) => (
            React.createElement(PricingCard, { key: plan.id, plan: plan, onSelect: () => onSelectPlan(plan) })
          )),
          React.createElement("div", { className: "flex flex-col h-full bg-zinc-800 rounded-2xl shadow-xl border border-dashed border-zinc-600 p-8 transform transition-transform duration-300 hover:-translate-y-2" },
            React.createElement("h3", { className: "text-2xl font-bold text-white" }, "Custom Package"),
            React.createElement("p", { className: "mt-4 text-gray-400 flex-grow" }, "Need something different? Let's build a package that fits your exact needs."),
            React.createElement("div", { className: "mt-6" },
                React.createElement("span", { className: "text-4xl font-extrabold text-white" }, "Tailored Pricing"),
                React.createElement("p", { className: "text-lg font-medium text-gray-400" }, "Call for a quote")
            ),
            React.createElement("ul", { className: "mt-8 space-y-4" },
                React.createElement("li", { className: "flex items-start" },
                    React.createElement("div", { className: "flex-shrink-0" }, React.createElement(PhoneIcon, null)),
                    React.createElement("p", { className: "ml-3 text-base text-gray-300" }, "Custom equipment list")
                ),
                React.createElement("li", { className: "flex items-start" },
                    React.createElement("div", { className: "flex-shrink-0" }, React.createElement(PhoneIcon, null)),
                    React.createElement("p", { className: "ml-3 text-base text-gray-300" }, "Multi-day or long-term rental")
                ),
                 React.createElement("li", { className: "flex items-start" },
                    React.createElement("div", { className: "flex-shrink-0" }, React.createElement(PhoneIcon, null)),
                    React.createElement("p", { className: "ml-3 text-base text-gray-300" }, "Specialist crew members")
                )
            ),
            React.createElement("div", { className: "mt-auto pt-8" },
                React.createElement("a", {
                    href: "tel:+919994858927",
                    className: "w-full block text-center bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors"
                },
                    "Call to Book"
                )
            )
          )
        )
      )
    )
  );
};


// --- START OF components/UpiPaymentModal.tsx ---
const UpiPaymentModal = ({ isOpen, onClose, amount, booking, bookings }) => {
    const isMobileDevice = () => /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

    const UPI_ID = 'qr.possible@sib';
    const STUDIO_NAME = 'Possible Studio';
    const QR_CODE_URL = '/upi-qr-code.png';

    const [isMobile, setIsMobile] = useState(false);

    useEffect(() => {
        setIsMobile(isMobileDevice());
    }, []);

    useEffect(() => {
        if (!isOpen || !booking) return;

        const interval = setInterval(() => {
            const storedBookings = JSON.parse(localStorage.getItem('studioBookings') || '[]');
            const currentBooking = storedBookings.find(b => b.id === booking.id);
            if (currentBooking && currentBooking.status === 'confirmed') {
                clearInterval(interval);
                onClose();
            }
        }, 2000);

        return () => clearInterval(interval);
    }, [isOpen, booking, onClose]);

    if (!isOpen) return null;

    const handleMobilePay = () => {
        const upiUrl = `upi://pay?pa=${UPI_ID}&pn=${encodeURIComponent(STUDIO_NAME)}&am=${amount.toFixed(2)}&cu=INR&tn=Booking%20ID%20${booking.id}`;
        window.location.href = upiUrl;
    };

    const renderPaymentView = () => (
        React.createElement(React.Fragment, null,
            React.createElement("div", { className: "text-center mb-6" },
                React.createElement("p", { className: "text-sm text-gray-400" }, "Your Booking ID"),
                React.createElement("p", { className: "text-2xl font-bold text-yellow-400 tracking-widest bg-zinc-900 py-2 rounded-md font-mono" }, booking.id),
                React.createElement("p", { className: "text-xs text-yellow-500 mt-2" }, "Please add this ID to your UPI payment notes/remarks.")
            ),
            isMobile ? (
                React.createElement("button", { onClick: handleMobilePay, className: "w-full p-4 text-lg font-bold text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-3" },
                    React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-8 w-8", viewBox: "0 0 24 24", fill: "currentColor" }, React.createElement("path", { d: "M16.5 13.5h-9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5h9c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5zm-9-4h9c.83 0 1.5-.67 1.5-1.5S17.33 6.5 16.5 6.5h-9C6.67 6.5 6 7.17 6 8s.67 1.5 1.5 1.5zm9 8h-9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5h9c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5zM22 2H2v20h20V2zm-2 18H4V4h16v16z"})),
                    React.createElement("span", null, `Pay ₹${amount.toLocaleString('en-IN')} with UPI`)
                )
            ) : (
                React.createElement("div", { className: "bg-white p-4 rounded-lg flex justify-center" },
                    React.createElement("img", { src: QR_CODE_URL, alt: "UPI QR Code", className: "w-48 h-48" })
                )
            ),
            React.createElement("div", { className: "mt-6 text-center bg-zinc-900/50 p-4 rounded-lg" },
                React.createElement("div", { className: "flex justify-center items-center space-x-2" },
                    React.createElement("div", { className: "animate-spin rounded-full h-5 w-5 border-b-2 border-yellow-400" }),
                    React.createElement("p", { className: "text-gray-300" }, "Waiting for payment confirmation...")
                ),
                React.createElement("p", { className: "text-xs text-gray-500 mt-2" }, "This window will close automatically once payment is verified.")
            )
        )
    );

    return (
        React.createElement("div", { className: "fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4" },
            React.createElement("div", { className: "bg-zinc-800 p-6 rounded-2xl shadow-2xl border border-zinc-700 w-full max-w-md relative" },
                React.createElement("button", { onClick: onClose, className: "absolute top-3 right-4 text-gray-400 hover:text-white transition-colors text-3xl font-light" }, "×"),
                React.createElement("div", { className: "text-center mb-4" },
                    React.createElement("h2", { className: "text-2xl font-bold text-white" }, "Complete Your Payment")
                ),
                React.createElement("div", { className: "mt-6" },
                    renderPaymentView()
                )
            )
        )
    );
};


// --- START OF components/BookingForm.tsx ---
const BookingForm = ({ plan, addBooking, bookings, getUnavailableHours, onCancel }) => {
  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
  const [startTime, setStartTime] = useState('');
  const [endTime, setEndTime] = useState('');
  const [paymentOption, setPaymentOption] = useState('full');
  
  const [name, setName] = useState('');
  const [phone, setPhone] = useState('');
  const [formError, setFormError] = useState('');
  const [showUpiModal, setShowUpiModal] = useState(false);
  const [pendingBooking, setPendingBooking] = useState(null);

  useEffect(() => {
    setStartTime('');
    setEndTime('');
  }, [date]);

  useEffect(() => {
    setEndTime('');
  }, [startTime]);

  const unavailableHours = useMemo(() => getUnavailableHours(date), [date, getUnavailableHours]);

  const startTimes = useMemo(() => HOURLY_SLOTS.slice(0, -1).map(time => ({
    value: time,
    disabled: unavailableHours.includes(parseInt(time.split(':')[0], 10)),
  })), [unavailableHours]);

  const endTimes = useMemo(() => {
    if (!startTime) return [];
    const startHour = parseInt(startTime.split(':')[0], 10);
    let nextUnavailableHour = 23;
    for (const hour of unavailableHours.sort((a,b) => a - b)) {
        if (hour > startHour) {
            nextUnavailableHour = hour;
            break;
        }
    }
    return HOURLY_SLOTS
        .map(time => parseInt(time.split(':')[0], 10))
        .filter(hour => hour > startHour && hour <= nextUnavailableHour)
        .map(hour => ({ value: `${hour < 10 ? '0' : ''}${hour}:00` }));
  }, [startTime, unavailableHours]);
  
  const duration = useMemo(() => {
    if (!startTime || !endTime) return 0;
    const startHour = parseInt(startTime.split(':')[0], 10);
    const endHour = parseInt(endTime.split(':')[0], 10);
    return endHour > startHour ? endHour - startHour : 0;
  }, [startTime, endTime]);

  const totalCost = useMemo(() => plan.price * duration, [plan.price, duration]);

  const amountToPay = useMemo(() => {
    if (totalCost === 0) return 0;
    return paymentOption === 'half' ? totalCost / 2 : totalCost;
  }, [paymentOption, totalCost]);

  const isFormValid = useMemo(() => {
    return name.trim() !== '' && /^\d{10}$/.test(phone) && endTime && duration > 0;
  }, [name, phone, endTime, duration]);

  const handleSubmit = (e) => {
    e.preventDefault();
    setFormError('');

    if (!isFormValid) {
        if (name.trim() === '') {
            setFormError('Please enter your full name.');
        } else if (!/^\d{10}$/.test(phone)) {
            setFormError('Please enter a valid 10-digit phone number.');
        } else {
            setFormError('Please select a valid date and time range.');
        }
        return;
    }
    
    const newBooking = addBooking({
      planId: plan.id,
      planName: plan.name,
      name,
      phone,
      date,
      startTime,
      endTime,
      duration,
      totalCost,
      amountPaid: amountToPay,
      paymentOption,
      bookedVia: 'website'
    });

    setPendingBooking(newBooking);
    setShowUpiModal(true);
  };

  return (
    React.createElement(React.Fragment, null,
      React.createElement("section", { className: "py-20 sm:py-24 bg-zinc-800" },
        React.createElement("div", { className: "container mx-auto max-w-4xl px-4" },
          React.createElement("div", { className: "bg-zinc-900 p-8 md:p-12 rounded-2xl shadow-2xl border border-zinc-700" },
            React.createElement("div", { className: "flex justify-between items-start mb-6" },
              React.createElement("div", null,
                  React.createElement("h2", { className: "text-3xl font-bold text-white mb-2" }, "Book: ", React.createElement("span", { className: "text-yellow-400" }, plan.name)),
                  React.createElement("p", { className: "text-gray-400" }, "Complete the steps below to secure your spot.")
              ),
              React.createElement("button", { onClick: onCancel, className: "text-gray-400 hover:text-white transition-colors text-3xl font-light" }, "×")
            ),
            
            React.createElement("form", { onSubmit: handleSubmit, className: "space-y-8" },
              React.createElement("div", null,
                React.createElement("label", { className: "block text-lg font-semibold text-white mb-3" }, "1. Select Date & Time"),
                React.createElement("div", { className: "grid grid-cols-1 sm:grid-cols-3 gap-4" },
                  React.createElement("input", { type: "date", value: date, min: new Date().toISOString().split('T')[0], onChange: (e) => setDate(e.target.value), className: "sm:col-span-1 w-full p-3 bg-zinc-700 text-white rounded-lg border border-zinc-600 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" }),
                  React.createElement("select", { value: startTime, onChange: e => setStartTime(e.target.value), className: "sm:col-span-1 w-full p-3 bg-zinc-700 text-white rounded-lg border border-zinc-600 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" },
                    React.createElement("option", { value: "" }, "Start Time"),
                    startTimes.map(time => React.createElement("option", { key: time.value, value: time.value, disabled: time.disabled }, time.value))
                  ),
                  React.createElement("select", { value: endTime, onChange: e => setEndTime(e.target.value), disabled: !startTime, className: "sm:col-span-1 w-full p-3 bg-zinc-700 text-white rounded-lg border border-zinc-600 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 disabled:opacity-50" },
                    React.createElement("option", { value: "" }, "End Time"),
                    endTimes.map(time => React.createElement("option", { key: time.value, value: time.value }, time.value))
                  )
                )
              ),
              React.createElement("div", null,
                React.createElement("h3", { className: "text-lg font-semibold text-white mb-3" }, "2. Your Details"),
                React.createElement("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-4" },
                  React.createElement("input", { type: "text", placeholder: "Full Name", value: name, onChange: e => setName(e.target.value), className: "w-full p-3 bg-zinc-700 text-white rounded-lg border border-zinc-600 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" }),
                  React.createElement("input", { type: "tel", placeholder: "10-Digit Phone Number", value: phone, onChange: e => setPhone(e.target.value), className: "flex-grow p-3 bg-zinc-700 text-white rounded-lg border border-zinc-600 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                ),
                formError && React.createElement("p", { className: "text-red-400 text-sm mt-2" }, formError)
              ),
              React.createElement("div", null,
                React.createElement("h3", { className: "text-lg font-semibold text-white mb-3" }, "3. Choose Payment Option"),
                React.createElement("div", { className: `p-4 bg-zinc-800 rounded-lg mb-4 ${duration > 0 ? 'block' : 'hidden'}` },
                  React.createElement("p", { className: "text-lg" }, "Duration: ", React.createElement("span", { className: "font-bold text-yellow-400" }, `${duration} ${duration === 1 ? 'hour' : 'hours'}`)),
                  React.createElement("p", { className: "text-lg" }, "Total Cost: ", React.createElement("span", { className: "font-bold text-yellow-400" }, `₹${totalCost.toLocaleString('en-IN')}`))
                ),
                React.createElement("div", { className: `flex space-x-4 ${duration > 0 ? 'flex' : 'hidden'}` },
                    React.createElement("button", { type: "button", onClick: () => setPaymentOption('half'), className: `flex-1 p-4 rounded-lg border-2 text-left transition-colors ${paymentOption === 'half' ? 'border-yellow-500 bg-yellow-900/30' : 'border-zinc-600 bg-zinc-700'}` },
                        React.createElement("p", { className: "font-bold" }, "50% Advance"), React.createElement("p", { className: "text-2xl font-bold" }, `₹${(totalCost / 2).toLocaleString('en-IN')}`), React.createElement("p", { className: "text-sm text-gray-400" }, "Pay remaining at studio")
                    ),
                    React.createElement("button", { type: "button", onClick: () => setPaymentOption('full'), className: `flex-1 p-4 rounded-lg border-2 text-left transition-colors ${paymentOption === 'full' ? 'border-yellow-500 bg-yellow-900/30' : 'border-zinc-600 bg-zinc-700'}` },
                        React.createElement("p", { className: "font-bold" }, "Full Payment"), React.createElement("p", { className: "text-2xl font-bold" }, `₹${totalCost.toLocaleString('en-IN')}`), React.createElement("p", { className: "text-sm text-yellow-400" }, "No hassle on shoot day")
                    )
                ),
                 React.createElement("div", { className: "mt-4 p-4 bg-zinc-800 rounded-lg" },
                    React.createElement("p", { className: "text-sm text-gray-400" }, "Payment will be processed via UPI. We support all major UPI apps.")
                )
              ),
              React.createElement("div", { className: "pt-4" },
                React.createElement("button", { type: "submit", disabled: !isFormValid, className: "w-full p-4 text-lg font-bold text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed" },
                  duration > 0 ? `Proceed to Pay ₹${amountToPay.toLocaleString('en-IN')}` : 'Complete All Fields'
                )
              )
            )
          )
        )
      ),
      pendingBooking && React.createElement(UpiPaymentModal, {
        isOpen: showUpiModal,
        onClose: () => setShowUpiModal(false),
        amount: amountToPay,
        booking: pendingBooking
      })
    )
  );
};


// --- START OF components/AdminPanel.tsx ---
const AdminPanel = ({ bookings, addBooking, getUnavailableHours, confirmPayment }) => {
  const [planId, setPlanId] = useState(PRICING_PLANS[0].id);
  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
  const [startTime, setStartTime] = useState('');
  const [endTime, setEndTime] = useState('');
  const [name, setName] = useState('');
  const [phone, setPhone] = useState('');
  const [error, setError] = useState('');

  const resetForm = () => {
    setPlanId(PRICING_PLANS[0].id);
    setStartTime('');
    setEndTime('');
    setName('');
    setPhone('');
    setError('');
  };

  useEffect(() => {
    setError('');
    setStartTime('');
    setEndTime('');
  }, [date]);

  useEffect(() => {
    setError('');
    setEndTime('');
  }, [startTime]);

  const unavailableHours = useMemo(() => getUnavailableHours(date), [date, getUnavailableHours]);

  const startTimes = useMemo(() => {
      return HOURLY_SLOTS.slice(0, -1).map(time => ({
          value: time,
          disabled: unavailableHours.includes(parseInt(time.split(':')[0], 10)),
      }));
  }, [unavailableHours]);

  const endTimes = useMemo(() => {
    if (!startTime) return [];
    const startHour = parseInt(startTime.split(':')[0], 10);
    let nextUnavailableHour = 23;
    for (const hour of unavailableHours.sort((a,b) => a - b)) {
        if (hour > startHour) {
            nextUnavailableHour = hour;
            break;
        }
    }
    return HOURLY_SLOTS
        .map(time => parseInt(time.split(':')[0], 10))
        .filter(hour => hour > startHour && hour <= nextUnavailableHour)
        .map(hour => ({ value: `${hour < 10 ? '0' : ''}${hour}:00` }));
  }, [startTime, unavailableHours]);


  const handleManualBooking = (e) => {
    e.preventDefault();
    setError('');
    if (!planId || !date || !startTime || !endTime || !name || !phone) {
      setError('Please fill all fields.');
      return;
    }
    
    const plan = PRICING_PLANS.find(p => p.id === planId);
    const startHour = parseInt(startTime.split(':')[0], 10);
    const endHour = parseInt(endTime.split(':')[0], 10);
    const duration = endHour > startHour ? endHour - startHour : 0;
    
    if (duration <= 0) {
      setError('End time must be after start time.');
      return;
    }
    
    addBooking({
      planId: plan.id,
      planName: plan.name,
      name,
      phone,
      date,
      startTime,
      endTime,
      duration,
      totalCost: plan.price * duration,
      amountPaid: plan.price * duration,
      paymentOption: 'full',
      bookedVia: 'phone',
    });
    resetForm();
  };
  
  const pendingBookings = bookings
    .filter(b => b.status === 'pending')
    .sort((a, b) => parseInt(b.id.split('-')[1]) - parseInt(a.id.split('-')[1]));

  const confirmedBookings = bookings
    .filter(b => b.status === 'confirmed')
    .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime() || a.startTime.localeCompare(b.startTime));

  const BookingsTable = ({ title, bookingList, isPending = false }) => (
    React.createElement("div", { className: "bg-zinc-800 p-6 rounded-lg shadow-lg border border-zinc-700" },
      React.createElement("h2", { className: "text-2xl font-bold text-yellow-400 mb-4" }, title),
      React.createElement("div", { className: "overflow-x-auto" },
        React.createElement("table", { className: "min-w-full divide-y divide-zinc-700" },
          React.createElement("thead", { className: "bg-zinc-700/50" },
            React.createElement("tr", null,
              React.createElement("th", { scope: "col", className: "px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider" }, "Client"),
              React.createElement("th", { scope: "col", className: "px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider" }, "Date & Time"),
              React.createElement("th", { scope: "col", className: "px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider" }, "Details"),
              isPending && React.createElement("th", { scope: "col", className: "px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider" }, "Action")
            )
          ),
          React.createElement("tbody", { className: "bg-zinc-800 divide-y divide-zinc-700" },
            bookingList.length > 0 ? bookingList.map(booking => (
              React.createElement("tr", { key: booking.id, className: "hover:bg-zinc-700/50" },
                React.createElement("td", { className: "px-4 py-4 whitespace-nowrap text-sm font-medium text-white" },
                    React.createElement("div", null, booking.name),
                    React.createElement("div", { className: "text-xs text-gray-400" }, booking.phone),
                    React.createElement("div", { className: "text-xs font-mono text-yellow-500 mt-1" }, booking.id)
                ),
                React.createElement("td", { className: "px-4 py-4 whitespace-nowrap text-sm text-gray-300" },
                  React.createElement("div", null, new Date(booking.date).toLocaleDateString('en-GB')),
                  React.createElement("div", { className: "text-xs" }, `${booking.startTime} - ${booking.endTime}`)
                ),
                React.createElement("td", { className: "px-4 py-4 whitespace-nowrap text-sm text-gray-300" },
                  React.createElement("div", null, booking.planName),
                  React.createElement("div", { className: "text-xs" }, `Paid: ₹${booking.amountPaid.toLocaleString('en-IN')} (${booking.paymentOption})`),
                  React.createElement("span", { className: `mt-1 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${booking.bookedVia === 'phone' ? 'bg-purple-200 text-purple-800' : 'bg-green-200 text-green-800'}` },
                    booking.bookedVia
                  )
                ),
                isPending && (
                  React.createElement("td", { className: "px-4 py-4 whitespace-nowrap text-sm" },
                    React.createElement("button", { onClick: () => confirmPayment(booking.id), className: "bg-green-600 text-white font-bold py-2 px-3 rounded-lg hover:bg-green-700 transition-colors text-xs" },
                        "Confirm Payment"
                    )
                  )
                )
              )
            )) : (
              React.createElement("tr", null,
                React.createElement("td", { colSpan: isPending ? 4 : 3, className: "text-center py-8 text-gray-400" }, "No bookings in this category.")
              )
            )
          )
        )
      )
    )
  );

  return (
    React.createElement("div", { className: "container mx-auto px-4 sm:px-6 lg:px-8 py-12" },
      React.createElement("h1", { className: "text-4xl font-bold text-white mb-8" }, "Admin Dashboard"),
      
      React.createElement("div", { className: "grid lg:grid-cols-3 gap-8" },
        React.createElement("div", { className: "lg:col-span-1 bg-zinc-800 p-6 rounded-lg shadow-lg border border-zinc-700 h-fit" },
          React.createElement("h2", { className: "text-2xl font-bold text-yellow-400 mb-4" }, "Add Manual Booking"),
          React.createElement("p", { className: "text-sm text-gray-400 mb-6" }, "For confirmed bookings made over the phone."),
          React.createElement("form", { onSubmit: handleManualBooking, className: "space-y-4" },
            React.createElement("div", null,
              React.createElement("label", { htmlFor: "admin-name", className: "block text-sm font-medium text-gray-300" }, "Client Name"),
              React.createElement("input", { type: "text", id: "admin-name", value: name, onChange: e => setName(e.target.value), className: "mt-1 block w-full p-2 bg-zinc-700 border border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500" })
            ),
             React.createElement("div", null,
              React.createElement("label", { htmlFor: "admin-phone", className: "block text-sm font-medium text-gray-300" }, "Client Phone"),
              React.createElement("input", { type: "tel", id: "admin-phone", value: phone, onChange: e => setPhone(e.target.value), className: "mt-1 block w-full p-2 bg-zinc-700 border border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500" })
            ),
            React.createElement("div", null,
              React.createElement("label", { htmlFor: "plan-select", className: "block text-sm font-medium text-gray-300" }, "Package"),
              React.createElement("select", { id: "plan-select", value: planId, onChange: e => setPlanId(e.target.value), className: "mt-1 block w-full p-2 bg-zinc-700 border border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500" },
                PRICING_PLANS.map(p => React.createElement("option", { key: p.id, value: p.id }, p.name))
              )
            ),
            React.createElement("div", null,
              React.createElement("label", { htmlFor: "admin-date", className: "block text-sm font-medium text-gray-300" }, "Date"),
              React.createElement("input", { type: "date", id: "admin-date", value: date, onChange: e => setDate(e.target.value), min: new Date().toISOString().split('T')[0], className: "mt-1 block w-full p-2 bg-zinc-700 border border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500" })
            ),
            React.createElement("div", { className: "grid grid-cols-2 gap-2" },
              React.createElement("div", null,
                React.createElement("label", { htmlFor: "admin-start-time", className: "block text-sm font-medium text-gray-300" }, "Start Time"),
                React.createElement("select", { id: "admin-start-time", value: startTime, onChange: e => setStartTime(e.target.value), className: "mt-1 block w-full p-2 bg-zinc-700 border border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500" },
                    React.createElement("option", { value: "" }, "Select"),
                    startTimes.map(time => React.createElement("option", { key: time.value, value: time.value, disabled: time.disabled }, time.value))
                )
              ),
              React.createElement("div", null,
                React.createElement("label", { htmlFor: "admin-end-time", className: "block text-sm font-medium text-gray-300" }, "End Time"),
                React.createElement("select", { id: "admin-end-time", value: endTime, onChange: e => setEndTime(e.target.value), disabled: !startTime, className: "mt-1 block w-full p-2 bg-zinc-700 border border-zinc-600 rounded-md shadow-sm focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 disabled:opacity-50" },
                    React.createElement("option", { value: "" }, "Select"),
                    endTimes.map(time => React.createElement("option", { key: time.value, value: time.value }, time.value))
                )
              )
            ),
            error && React.createElement("p", { className: "text-red-400 text-sm" }, error),
            React.createElement("button", { type: "submit", className: "w-full bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-700 transition-colors" },
              "Add Confirmed Booking"
            )
          )
        ),
        
        React.createElement("div", { className: "lg:col-span-2 space-y-8" },
            React.createElement(BookingsTable, { title: "Pending Confirmation", bookingList: pendingBookings, isPending: true }),
            React.createElement(BookingsTable, { title: "Confirmed Bookings", bookingList: confirmedBookings })
        )

      )
    )
  );
};

// --- START OF components/Footer.tsx ---
const Footer = () => {
  return (
    React.createElement("footer", { className: "bg-zinc-800 border-t border-zinc-700" },
      React.createElement("div", { className: "container mx-auto px-4 sm:px-6 lg:px-8 py-8" },
        React.createElement("div", { className: "text-center text-gray-400" },
          React.createElement("p", null, `© ${new Date().getFullYear()} Posibble Studio. All Rights Reserved.`),
          React.createElement("p", { className: "mt-2 text-sm" }, "Built for creative professionals."),
          React.createElement("div", { className: "mt-4 flex justify-center space-x-6" },
            React.createElement("a", { href: "#", className: "hover:text-yellow-400 transition-colors" }, "Instagram"),
            React.createElement("a", { href: "#", className: "hover:text-yellow-400 transition-colors" }, "Facebook"),
            React.createElement("a", { href: "#", className: "hover:text-yellow-400 transition-colors" }, "Twitter")
          )
        )
      )
    )
  );
};

// --- START OF components/Auth.tsx ---
const Auth = ({ onLogin }) => {
    const [userId, setUserId] = useState('');
    const [password, setPassword] = useState('');
    const [error, setError] = useState('');

    const handleFormSubmit = (e) => {
        e.preventDefault();
        setError('');
        const success = onLogin(userId, password);
        if (!success) {
            setError('Invalid User ID or password.');
        }
    };

    return (
        React.createElement("div", { className: "flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8" },
            React.createElement("div", { className: "max-w-md w-full space-y-8 bg-zinc-800 p-10 rounded-xl shadow-lg border border-zinc-700" },
                React.createElement("div", null,
                    React.createElement("h2", { className: "mt-6 text-center text-3xl font-extrabold text-white" },
                        "Admin Login"
                    )
                ),
                React.createElement("form", { className: "mt-8 space-y-6", onSubmit: handleFormSubmit },
                    React.createElement("div", { className: "rounded-md shadow-sm -space-y-px" },
                        React.createElement("div", null,
                            React.createElement("label", { htmlFor: "user-id", className: "sr-only" }, "User ID"),
                            React.createElement("input", {
                                id: "user-id",
                                name: "userid",
                                type: "text",
                                autoComplete: "username",
                                required: true,
                                value: userId,
                                onChange: (e) => setUserId(e.target.value),
                                className: "appearance-none rounded-none relative block w-full px-3 py-3 border border-zinc-600 bg-zinc-700 text-white placeholder-gray-400 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm rounded-t-md",
                                placeholder: "User ID"
                            })
                        ),
                        React.createElement("div", null,
                            React.createElement("label", { htmlFor: "password", className: "sr-only" }, "Password"),
                            React.createElement("input", {
                                id: "password",
                                name: "password",
                                type: "password",
                                autoComplete: "current-password",
                                required: true,
                                value: password,
                                onChange: (e) => setPassword(e.target.value),
                                className: "appearance-none rounded-none relative block w-full px-3 py-3 border border-zinc-600 bg-zinc-700 text-white placeholder-gray-400 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm rounded-b-md",
                                placeholder: "Password"
                            })
                        )
                    ),
                    
                    error && React.createElement("p", { className: "text-red-400 text-center text-sm" }, error),

                    React.createElement("div", null,
                        React.createElement("button", {
                            type: "submit",
                            className: "group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-slate-900 bg-yellow-500 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 focus:ring-offset-zinc-800"
                        },
                           'Sign in'
                        )
                    )
                )
            )
        )
    );
};

// --- START OF App.tsx ---
const App = () => {
  const [currentView, setCurrentView] = useState(View.USER);
  const [selectedPlan, setSelectedPlan] = useState(null);
  const [bookings, setBookings] = useState([]);
  const [confirmedBooking, setConfirmedBooking] = useState(null);
  const [isFadingOut, setIsFadingOut] = useState(false);
  
  const [admins, setAdmins] = useState([]);
  const [isAuthenticated, setIsAuthenticated] = useState(false);

  useEffect(() => {
    try {
      const storedBookings = localStorage.getItem('studioBookings');
      if (storedBookings) setBookings(JSON.parse(storedBookings));
      
      const storedAdmins = localStorage.getItem('studioAdmins');
      let adminData = [];
      if (storedAdmins) {
          adminData = JSON.parse(storedAdmins);
      }

      if (!adminData.some(a => a.userId === 'psmember@01')) {
          adminData.push({ id: 'default_admin', userId: 'psmember@01', password: 'pswork@01' });
          localStorage.setItem('studioAdmins', JSON.stringify(adminData));
      }
      setAdmins(adminData);
      
      const sessionAuth = localStorage.getItem('studioAuth');
      if(sessionAuth === 'true') setIsAuthenticated(true);

    } catch (error) {
      console.error("Failed to initialize app state from localStorage", error);
    }
  }, []);

  useEffect(() => {
    try {
      localStorage.setItem('studioBookings', JSON.stringify(bookings));
    } catch (error) {
        console.error("Failed to save bookings to localStorage", error);
    }
  }, [bookings]);
  
  useEffect(() => {
    try {
        localStorage.setItem('studioAdmins', JSON.stringify(admins));
    } catch (error) {
        console.error("Failed to save admins to localStorage", error);
    }
  }, [admins]);

  useEffect(() => {
    localStorage.setItem('studioAuth', JSON.stringify(isAuthenticated));
  }, [isAuthenticated]);

  const handleSelectPlan = useCallback((plan) => {
    setSelectedPlan(plan);
    setTimeout(() => {
      document.getElementById('booking-section')?.scrollIntoView({ behavior: 'smooth' });
    }, 100);
  }, []);

  const addBooking = useCallback((booking) => {
    const bookingId = `BK-${Date.now()}`;
    const newBooking = { ...booking, id: bookingId, status: 'pending' };
    setBookings(prev => [...prev, newBooking]);
    return newBooking;
  }, []);
  
  const addManualBooking = useCallback((booking) => {
    const bookingId = `BK-${Date.now()}`;
    const newBooking = { ...booking, id: bookingId, status: 'confirmed' };
    setBookings(prev => [...prev, newBooking]);
    alert(`Booking added for ${newBooking.name} on ${newBooking.date}`);
  }, []);

  const confirmPayment = useCallback((bookingId) => {
      let confirmed = null;
      setBookings(prev => prev.map(b => {
          if (b.id === bookingId) {
              confirmed = { ...b, status: 'confirmed' };
              return confirmed;
          }
          return b;
      }));
      
      if (confirmed) {
          if(confirmed.bookedVia === 'website') {
             setConfirmedBooking(confirmed);
             setIsFadingOut(false);
             setTimeout(() => {
                setIsFadingOut(true);
             }, 5000);
             setTimeout(() => {
                setConfirmedBooking(null);
                setSelectedPlan(null);
             }, 6000);
          }
      }
  }, []);

  const getUnavailableHours = useCallback((date) => {
    const bookedHours = new Set();
    bookings
        .filter(b => b.date === date && b.status === 'confirmed')
        .forEach(b => {
            const startHour = parseInt(b.startTime.split(':')[0], 10);
            const endHour = parseInt(b.endTime.split(':')[0], 10);
            for (let i = startHour; i < endHour; i++) {
                bookedHours.add(i);
            }
        });
    return Array.from(bookedHours);
  }, [bookings]);

  const toggleView = () => {
    setCurrentView(prev => (prev === View.USER ? View.ADMIN : View.USER));
    setSelectedPlan(null);
  };
  
  const handleLogin = (userId, password) => {
      const admin = admins.find(a => a.userId.toLowerCase() === userId.toLowerCase() && a.password === password);
      if(admin){
          setIsAuthenticated(true);
          return true;
      }
      return false;
  };
  
  const handleLogout = () => {
      setIsAuthenticated(false);
      setCurrentView(View.USER);
  };

  return (
    React.createElement("div", { className: "min-h-screen bg-zinc-900 text-gray-100 flex flex-col" },
      React.createElement(Header, { 
        currentView: currentView, 
        toggleView: toggleView,
        isAuthenticated: isAuthenticated && currentView === View.ADMIN,
        logout: handleLogout
      }),
      React.createElement("main", { className: "flex-grow" },
        currentView === View.USER ? (
          React.createElement(React.Fragment, null,
            React.createElement(Pricing, { onSelectPlan: handleSelectPlan }),
            selectedPlan && (
              React.createElement("div", { id: "booking-section" },
                React.createElement(BookingForm, { 
                  plan: selectedPlan, 
                  addBooking: addBooking,
                  bookings: bookings,
                  getUnavailableHours: getUnavailableHours,
                  onCancel: () => setSelectedPlan(null)
                })
              )
            ),
             confirmedBooking && (
                React.createElement("div", { className: `fixed top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-green-500 text-white p-6 rounded-lg shadow-2xl z-50 text-center w-11/12 max-w-md transition-opacity duration-1000 ${isFadingOut ? 'opacity-0' : 'opacity-100'}` },
                    React.createElement("h3", { className: "text-2xl font-bold mb-2" }, "Booking Confirmed!"),
                    React.createElement("p", null, `Thank you, ${confirmedBooking.name}! Your booking is secured.`),
                    React.createElement("p", { className: "text-sm mt-2 font-semibold" }, `(${new Date(confirmedBooking.date).toLocaleDateString('en-GB')} from ${confirmedBooking.startTime} to ${confirmedBooking.endTime})`)
                )
            )
          )
        ) : (
          isAuthenticated ? (
            React.createElement(AdminPanel, { bookings: bookings, addBooking: addManualBooking, getUnavailableHours: getUnavailableHours, confirmPayment: confirmPayment })
          ) : (
            React.createElement(Auth, { onLogin: handleLogin })
          )
        )
      ),
      React.createElement(Footer, null)
    )
  );
};


// --- START OF index.tsx ---
const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  React.createElement(React.StrictMode, null,
    React.createElement(App, null)
  )
);
    </script>
  </body>
</html>
